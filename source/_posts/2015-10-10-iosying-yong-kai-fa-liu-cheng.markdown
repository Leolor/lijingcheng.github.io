---
layout: post
title: "iOS应用开发流程"
date: 2015-8-10 10:36:14 +0800
comments: true
categories: 
---

<br/>
{% img left http://7x00ed.com1.z0.glb.clouddn.com/Xcode.png 160 160 "" "" %}
>**软件开发流程 - *to be continue...***   

<br/>
<!-- more -->

{% img left http://7x00ed.com1.z0.glb.clouddn.com/Xcode.png 160 160 "" "" %}
>**软件开发流程 - *程序的生命周期是指应用程序从启动到结束整个阶段的全过程.***   
本文主要介绍在进行iOS开发。

<br/>
<!-- more -->

#开发前的准备
####申请苹果开发者帐号
####配置开发者证书及描述文件
#开发阶段
代码规范
任务拆分
技术选型，调研，风险评估
开发计划 ominiplan...
####搭建环境（cocoapods.git sourcetree oschina..）
####工程目录
####代码分层
####。
#开发完成申请上线
代码签名
打包提交
等待review (申请加急)
代码签名 (code signing) 和配置文件 (provisioning)





iOS开发过程中如果需要进行真机调试、发布需要注册申请很多证书，对于初学者往往迷惑不解，再加上今天的文章中会牵扯到一些特殊配置，这里就简单的对iOS开发的常用证书和秘钥等做一说明。
证书
iOS常用的证书包括开发证书和发布证书，无论是真机调试还是最终发布应用到App Store这两个证书都是必须的，它是iOS开发的基本证书。
a.开发证书：开发证书又分为普通开发证书和推送证书，如果仅仅是一般的应用则前者即可满足，但是如果开发推送应用则必须使用推送证书。
b.发布证书：发布证书又可以分为普通发布证书、推送证书、Pass Type ID证书、站点发布证书、VoIP服务证书、苹果支付证书。同样的，对于需要使用特殊服务的应用则必须选择对应的证书。
应用标识
App ID,应用程序的唯一标识，对应iOS应用的Bundle Identifier，App ID在苹果开发者中心中分为通配应用ID和明确的应用ID,前者一般用于普通应用开发，一个ID可以适用于多个不同标识的应用；但是对于使用消息推送、Passbook、站点发布、iCloud等服务的应用必须配置明确的应用ID。
设备标识
UDID,用于标识每一台硬件设备的标示符。注意它不是device token，device token是根据UDID使用一个只有Apple自己才知道的算法生成的一组标示符。
配置简介
Provisioning Profiles,平时又称为PP文件。将UDID、App ID、开发证书打包在一起的配置文件，同样分为开发和发布两类配置文件。
秘钥
在申请开发证书时必须要首先提交一个秘钥请求文件，对于生成秘钥请求文件的mac，如果要做开发则只需要下载证书和配置简介即可开发。但是如果要想在其他机器上做开发则必须将证书中的秘钥导出（导出之后是一个.p12文件），然后导入其他机器。同时对于类似于推送服务器端应用如果要给APNs发送消息，同样需要使用.p12秘钥文件，并且这个秘钥文件需要是推送证书导出的对应秘钥。





公钥加密机制

使用公钥加密机制，双方各自拥有一份公钥和一份私钥，公钥和私钥通过数学演算联系在一起。公钥用于将明文转化为密文（变成了一堆乱码），私钥用来解密这一堆乱码般的信息。

一旦信息被公钥加密，它将只能由相应的私钥解密。两者缺一不可，而且也不能反过来使用。公钥可以自由传播，无需担心系统安全性降低；但私钥应妥善保管，不可将其泄露给未经授权解密的信息的用户，这就是公钥和私钥这两个名称的由来。



打包前关zombie，证书都设置好后先编译再打包。
在buildsetting 里设置product name为app name，bundle name与它一样，bundle display name可以不一样，但比较类似。

感谢您联系苹果开发者计划支持团队关于开发者账号
的问题。我是Cathy, 非常高兴能给您提供帮助。

iOS Developer Program 分为 iOS Standard Program 和 iOS Enterprise Program 两种, iOS Standard Program 又包括Standard Company 和 Standard Individual两种， 请您查看：

苹果公司目前提供两种 iOS Developer Program enrollment包括如下：

1. Standard Program

?一年$99美元 - 个人
- 此计划是为个人开发者能够开发iPhone / iPod Touch/ iPad的商业应用，并且能够发布他们的应用程序到App Store上。
- 这个程序允许开发人员分发其应用程序到多达100个设备上作测试, 并能分发应用程序到App Store上进行发布及销售。
- 这个程序不允许开发人员创建一个团队，不能添加团队成员到他们的开发者团队。
- 开发者参加这一计划将会以其个人名义作为卖方在App Store上进行销售。

?一年$99美元 - 公司
- 此计划是对于希望开发iPhone和iPod touch/iPad的应用程序的公司而设。
- 此方案允许公司分发他们的应用程序至多达100个设备作测试, 和分发其应用程序到App Store上进行发布或销售。
- 这个程序允许开发人员创建一个团队，并可以添加其他开发者到其开发者团队中。
- 参加这一计划，其公司名称将作为卖方在App Store上销售。
- 公司应在邓白氏注册并拥有有效的DUNS号码。

2. Enterprise Program

?一年$299美元 - 公司
- 公司应在邓白氏注册并拥有有效的DUNS号码。
- 此计划是对于有意开发iPhone/iPod Touch/iPad 应用程序的公司而设，这将是只发给其雇员的内部专有的计划。
- 这个程序允许开发人员创建一个团队，并可以添加其他开发者到其开发者团队中。
- 此计划将不会允许该公司在App Store出售他们的应用程序。

请您至以下网站查询您的邓式编码，如果我们系统无法找到贵公司的邓白氏编码系统将会提交一个申请：

https://developer.apple.com/ios/enroll/dunsLookupForm.action

其他有关 iOS Developer Program 开发计划的网站 :
http://developer.apple.com/support/ios/enrollment.html/
http://developer.apple.com/programs/start/standard/
http://developer.apple.com/programs/which-program/

如果您有其他的问题，欢迎致电或通过电邮的方式跟我们联系。我们的办公时间是周一至周五，09:00-17:00 CST，电话号码是4006 701 855。我们很乐意给您提供帮助。

感谢您参与我们的开发者计划。

Best regards,

Cathy
Apple Developer Program Support

企业账号三大好处：
发布内部App
在各个设备上测试
代码级别的技术支持
免费申请DUNS:https://developer.apple.com/ios/enroll/dunsLookupForm.action

为什么要申请开发者账号?
只有拥有苹果开发者账号才能够用真实的iPhone手机对我们开发的产品进行测试工作。否则只能用电脑上的虚拟手机进行测试。而真机测试对于产品整个开发阶段来说都是很重要的，主要原因如下：
1.     产品的核心功能包括GPS定位，电脑上的虚拟手机没有办法实现此功能。
2.     我们对产品的性能要求比较高，由于虚拟手机的内存比真实手机大很多，所以不能够准确展现产品性能。
3.     产品每个模块都有网络访问功能，如果使用虚拟手机只能够通过WIFI去获取数据，而产品用户对程序的主要使用场景在户外，更多是使用2G/3G方式。所以在网络请求时间问题的测试上，虚拟手机不能够真实体现具体情况。

苹果开发者账号分类:
苹果开发者账号分为 个人版(99$/年)，公司版(99$/年)，企业版(299$/年)三种类型。

个人账号：只能有一个开发者，开发者将会以其个人名义作为卖方在苹果商店里进行销售. 申请时需要提供信用卡信息。
公司账号：可以有多个开发者协同开发，其公司名称将作为卖方在App Store上销售。除信用卡信息外还需要提供公司基本信息和营业执照复印件等信息, 并且应在申请公司版账号前应首先申请邓白氏编码。
企业账号: 企业账号所开发的App只能用于企业内部员工，不能够提交到苹果商店上供其他用户使用, 在申请企业版账号前应首先申请邓白氏编码。

经过对各账号的比较，建议使用公司版账号(99$/年),原因如下:
1.      企业账号不能够将App发布到苹果商店,只能用于企业内部员工,因此不考虑使用;
2.      个人账号只能显示个人姓名在上架的苹果商店的开发者一栏里,这样无法体现是我们公司的产品,公司账号在已上线的苹果商店的开发者一栏里可以显示注册时公司的名称也可以自定义；
3.  公司版账号相对于个人版来说，它允许开发人员创建一个团队，并可以添加其他开发者到其开发者团队中，这样不仅有利于团队开发，也便于管理。



申请公司版开发者账号之前需要申请邓白氏编码,关于邓白氏编码介绍如下:
1.什么是邓白氏编码？
它是一个独一无二的9位数字全球编码，相当于企业的身份识别码 （就像是个人的身份证），被广泛应用于企业识别、商业信息的组织及整理。这个号码是由邓白氏公司签发的，每个号码会跟一个唯一的企业实体相对应，不会重复使用。也就是说，一个号码代表一个公司实体。

2.为什么要提到邓白氏编码？
在申请苹果企业版开发者账号或是公司版开发者账号时,苹果公司要求申请公司拥有可以唯一标识公司的邓白氏编码.

3.申请邓白氏编码可能会遇到的问题有哪些?
(1)邓白氏编码是可以免费申请的,申请之前拨打电话400-670-1885,此电话为苹果客服电话,会提供关于邓白氏编码申请的免费链接地址和其他相关信息;
       (2)邓白氏编码要在申请开发者账号之前申请下来,原因是邓白氏编码有一个审核的过程,时间在5到7个工作日或是14个工作日,这个时间取决于苹果公司,在此期间可以拨打400-670-1885电话咨询苹果公司
       (3)邓白氏编码是否已入苹果数据库,如果已入,便可以申请开发者账号;



苹果公司关于开发者账号续费的问题:
1.申请公司版账号(99$/年)满一年后,如果需要继续使用开发者账号,需要进行续费,续费金额根据申请账号而定,公司版账号是99$;
2.续费时间可以提前至60天,不能延期,否则上架产品会被强制下架;


备注: 苹果开发者网站developer.apple.com自2013/7/18起,出现宕机状况,有关开发者账号的所有网页无法正常显示,经苹果客服核实,此问题解决时间无法确定,只能通过经常点击查看是否可用,于今日2013/7/24还不能使用.

前言
公司目前申请的开发者帐号方案为公司版帐号，此方案允许在一年内将应用程序安装到100台设备上测试使用。并可以将应用程序发布到App Store上进行销售。公司名称将作为卖方显示在App Store上面。当公司内的开发人员比较多的时候，还可以使用公司版帐号对人员进行分组管理。

概述
有了开发者帐号就可以通过帐号生成开发者证书和授权文件进行真机调试，操作流程大致如下：生成证书 à 注册设备 à 生成AppID（应用程序标识符） à 生成授权文件。具体介绍如下：
Certification证书是苹果公司对开发者所使用电脑开发资格的认证方式，共分为3种：
1、    Developer Certification（开发证书）
此证书安装到电脑上后，开发人员便可以通过设备进行真机调试。并且可以通过此证书生成副本供多台电脑安装使用。
2、    Distribution Certification（发布证书）
此证书安装到电脑上后便提供了向iOS App Store发布应用的权限，开发人员可以利用它制作测试版和发布版的程序。需要注意此证书不可生成副本，仅有安装该证书的电脑才可使用。
3、    World Wide Developer Relation颁发的WWDR中间证书。可从http://developer.apple.com/certificationauthority/AppleWWDRCA.cer 或门户网站上下载并安装。

注册设备是指将用于真机调试及测试用的设备注册在“iOS Provisioning Portal”上(portal用来管理证书、设备、AppID、授权文件等)，注册时需要提供设备名称和它的唯一设备标识符(UDID)。设备名称可自定义，UDID可通过以下方式获取：

- 1、     开发人员可将设备连接到装有Xcode的Mac电脑上，然后打开Organizer窗口的Devices界面，在界面左侧找到自己的设备，点击后右侧的设备信息中将出现Identifier（即UDID）。
- 2、     非开发人员可将设备连接到装有iTunes的电脑上，然后在设备的Summary(概述)界面中单击“Serial Number(序列号)”，这样会使序列号变成Identifier(UDID)。


AppID（应用程序标识符）是应用程序在App Store上的唯一标识，可保证不会与其他应用冲突，通常使用苹果的反向域名符号展示，例如：com.citylife.Trackup或com.citylife.*。当应用中使用了APNS（Apple Push Notification Service）、Game Center和In-App Purchase时，AppID便不可以使用“*”通配符。

Provisioning Profile（授权文件）在Xcode中它用于为代码签名并授权应用程序可以在指定的设备上运行，或者允许应用程序加入到App Store中。授权文件的主要内容包括可用来测试设备的UDID（可多个）、AppID和所使用的证书。授权文件分为“开发授权文件”和“发布授权文件”两种：
1、    Developer Provisioning Profile（开发授权文件）
此文件应在装有开发证书或其副本的电脑上使用，开发人员在Xcode中选择该授权文件后，便可以将应用程序安装到授权文件指定的测试设备中进行真机调试。需要注意的是授权文件中的AppID应与开发程序中使用的Bundle Identifier一致。
2、    Distribution Provisioning Profile（发布授权文件）
此文件应在装有发布证书的电脑上使用，在生成发布授权文件时可选择两种方式：
1）、App Store(发布版)：用来将App发布到App Store上使用的授权文件。生成时不需要选择测试设备的UDID。
2）、Ad Hoc(测试版)：用来将App分发给测试人员或指定客户使用的授权文件。生成时需要选择测试设备的UDID。测试人员在拿到通过此授权文件发布出来的ipa格式的程序安装文件后，可通过iTunes或91助手安装使用。
注：当新添加测试设备后需要同时修改相应授权文件。
详细操作步骤
为了获得开发者证书、首先需要在电脑上生成一个证书签名请求文件。要创建证书申请文件并自动生成开发人员专属的密钥，请打开OS X系统自带的钥匙串访问（Keychain Access）工具，并选择下图中所示的发起证书申请功能。


打开之后的界面如下图所示。请务必输入与Apple ID相符的邮箱和姓名，并选择Save to Disk。


接下来需要确认证书申请文件的文件名和保存位置，存至桌面即可。

之后的操作详见以下链接：
http://www.cnblogs.com/ifeng/articles/2295859.html


使用Xcode进行实机调试

在自己的Mac电脑上连接iOS设备进行实机调试，一般来说需要以下几个步骤：
·      检查当前电脑上是否存在有效的开发者密钥和证书，如果没有则从备份的p12文件导入；
·      检查当前电脑上是否存在有效的provisioning profile，如果没有则从开发者中心下载；
·      将进行过登记的iOS设备连接至电脑；
·      在Xcode中配置当前开发工程，确认使用的开发者证书是有效证书；
·      在设备上进行调试。

前两步在前文已有所交代，下面着重讲述后三步中需要注意的事项。

将iOS设备连接至电脑：

设备的当前状态可以在Organizer窗口的Devices页中查看，左侧导航栏中带有设备名称的条目应该有一个灰色或绿色的指示灯，如下图所示。


指示灯为绿色表示当前可以进行实机调试。如果指示灯为灰色，右侧红线所示区域应该会有一个按钮叫“Use for Development”，点击之后等待进度条走完，指示灯应该就会变绿了。如果点击按钮之后提示输入Apple ID帐号密码，说明当前电脑上没有可用的provisioning profile，输入Apple ID应该可以自动下载provisioning profile。

如果指示灯为橘色或红色，则表示当前不能进行实机调试，可以在红色区域查看是否有“Use for Development”按钮，没有的话会在这里显示不能进行实机调试的原因，如无法下载provisioning profile、设备上操作系统版本超出当前Xcode支持范围等。

配置当前开发工程：

在当前开发工程下，进入Targets的Build Settings，确认Code Signing分组下的设置如图中所示为iPhone Developer，并且后面灰色括号中的内容符合开发者密钥中的姓名和provisioning profile名。



开始实机调试：

完成以上步骤确认后，可以看到Xcode左上角执行对象列表中的第一项由“iOS Device”变成了当前连接的设备名。如果设备刚刚接上电脑，这里可能需要等待数十秒时间，直到Xcode完全识别出设备为止。如果同时连接了多个支持实机调试的设备，也可以在这个列表中进行选择。如下图所示。


确认列表中选择了要实机调试的设备名后。点击Run按钮，或使用键盘快捷方式开始调试运行即可。

如果运行时出现以下画面，请点击Always Allow按钮。


如果在设备上设置了解锁密码，请先输入密码解锁设备，进入iOS的home screen后再从Xcode中选择运行应用，否则可能会提示无法解锁设备。

如果要进行Instruments跟踪而非Debug，则需要选择Product菜单下的Profile选项，后续操作与在模拟器上进行跟踪类似，此处不再赘述。


